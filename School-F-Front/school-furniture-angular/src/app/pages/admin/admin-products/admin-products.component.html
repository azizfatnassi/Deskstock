<div class="admin-products">
  <div class="header">
    <h1>Product Management</h1>
    <button class="add-btn" (click)="showAddProductForm()">
      Add New Product
    </button>
  </div>

  <!-- Filters -->
  <div class="filters">
    <div class="search-box">
      <input type="text" placeholder="Search products..." [(ngModel)]="searchTerm" (input)="onSearchChange()">
    </div>
    
    <select [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
      <option value="">All Categories</option>
      <option value="Chair">Chair</option>
      <option value="Table">Table</option>
      <option value="Desk">Desk</option>
      <option value="Storage">Storage</option>
      <option value="Lighting">Lighting</option>
      <option value="Decor">Decor</option>
    </select>
    
    <select [(ngModel)]="stockFilter" (change)="onStockFilterChange()">
      <option value="all">All Stock</option>
      <option value="in-stock">In Stock</option>
      <option value="low-stock">Low Stock</option>
      <option value="out-of-stock">Out of Stock</option>
    </select>
  </div>

  <!-- Product List -->
  <div class="products-container">
    <div class="loading" *ngIf="isLoading">
      Loading products...
    </div>
    
    <div class="products-grid" *ngIf="!isLoading && filteredProducts.length > 0">
      <div class="product-card" *ngFor="let product of getPaginatedProducts()">
        <div class="product-image">
          <img [src]="product.imageUrl || '/assets/placeholder.jpg'" [alt]="product.name">
        </div>
        
        <div class="product-info">
          <h3>{{ product.name }}</h3>
          <p class="description">{{ product.description }}</p>
          <p class="price">${{ product.price }}</p>
          <p class="stock" [class]="getStockStatus(product.stockQuantity)">Stock: {{ product.stockQuantity }}</p>
          <p class="category">{{ product.category }}</p>
        </div>
        
        <div class="product-actions">
          <button class="action-btn edit" (click)="editProduct(product)" title="Edit Product">
            Edit
          </button>
          
          <button class="action-btn delete" (click)="deleteProduct(product)" title="Delete Product">
            Delete
          </button>
        </div>
      </div>
    </div>
    
    <!-- Empty State -->
    <div class="empty-state" *ngIf="!isLoading && filteredProducts.length === 0">
      <h3>No products found</h3>
      <p>Try adjusting your filters or start by adding your first product</p>
      <button class="add-btn" (click)="showAddProductForm()">
        Add First Product
      </button>
    </div>
    
    <!-- Pagination -->
    <div class="pagination" *ngIf="totalPages > 1">
      <button class="page-btn" [disabled]="currentPage === 1" (click)="goToPage(currentPage - 1)">
        Previous
      </button>
      <span class="page-info">Page {{ currentPage }} of {{ totalPages }}</span>
      <button class="page-btn" [disabled]="currentPage >= totalPages" (click)="goToPage(currentPage + 1)">
        Next
      </button>
    </div>
  </div>
</div>

<!-- Add/Edit Product Modal -->
<div class="modal-overlay" *ngIf="showAddForm" (click)="cancelForm()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ editingProduct ? 'Edit Product' : 'Add New Product' }}</h2>
      <button class="close-btn" (click)="cancelForm()">&times;</button>
    </div>
    
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="name">Product Name</label>
        <input type="text" id="name" formControlName="name" required>
      </div>
      
      <div class="form-group">
        <label for="category">Category</label>
        <select id="category" formControlName="category" required>
          <option value="">Select Category</option>
          <option value="Chair">Chair</option>
          <option value="Table">Table</option>
          <option value="Desk">Desk</option>
          <option value="Storage">Storage</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="price">Price</label>
        <input type="number" id="price" formControlName="price" step="0.01" required>
      </div>
      
      <div class="form-group">
        <label for="stock">Stock Quantity</label>
        <input type="number" id="stock" formControlName="stockQuantity" required>
      </div>
      
      <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" formControlName="description" rows="4" required></textarea>
      </div>
      
      <div class="form-group">
        <label for="imageUrl">Image URL</label>
        <input type="url" id="imageUrl" formControlName="imageUrl">
      </div>
      
      <div class="form-actions">
        <button type="button" class="cancel-btn" (click)="cancelForm()">Cancel</button>
        <button type="submit" class="save-btn" [disabled]="!productForm.valid">Save Product</button>
      </div>
    </form>
  </div>
</div>